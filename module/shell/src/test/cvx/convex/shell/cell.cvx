{}


;;;;;;;;;;


(.t.def ..cell.size

  (.t.is (= 2
            (.cell.size 1)))

  (.t.is (< (.cell.size 1)
            (.cell.size [1])))

  (.t.is (.t.ex :ARGUMENT
                (.cell.size nil))))



(.t.def ..cell.ref.stat

  (.t.is (.t.ex :ARGUMENT
                (.cell.ref.stat nil)))

  (.t.is (= {:direct    1
             :embedded  1
             :persisted 0
             :soft      0
             :total     1}
            (.cell.ref.stat 1)))

  (.t.is (= {:direct    5
             :embedded  5
             :persisted 0
             :soft      0
             :total     5}
            (.cell.ref.stat [1 2 [3]])))

  (def stat
       (.cell.ref.stat *state*))

  (.t.is (< 0
            (:direct stat)))

  (.t.is (< 0
            (:embedded stat)))

  (.t.is (= 0
            (:persisted stat)))

  (.t.is (= 0
            (:soft stat)))

  (.t.is (< 0
            (:total stat))))
